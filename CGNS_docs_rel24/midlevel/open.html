<!-- CGNS Mid-Level Library - Opening and Closing a CGNS File -->

<html>
<head>
<meta http-equiv="Content-Style-Type" content="text/css">
<link href="midlevel.css" rel="stylesheet" type="text/css">
<title> CGNS Mid-Level Library - Opening and Closing a CGNS File </title>
</head>

<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">

<a href="#endnav"><img src="../blank.gif" border=0 alt="Skip navigation links"></a>
<small>
<center>
(<a href="../index.html"><b>CGNS&nbsp;Documentation&nbsp;Home&nbsp;Page</b></a>)
(<a href="../charter/index.html"><b>Steering&nbsp;Committee&nbsp;Charter</b></a>)
(<a href="../overview/index.html"><b>Overview&nbsp;and&nbsp;Entry-Level&nbsp;Document</b></a>)
(<a href="../user/index.html"><b>A&nbsp;User's&nbsp;Guide&nbsp;to&nbsp;CGNS</b></a>)
(<a href="../sids/index.html"><b>Standard&nbsp;Interface&nbsp;Data&nbsp;Structures</b></a>)
(<a href="../filemap/index.html"><b>SIDS-to-ADF&nbsp;File&nbsp;Mapping&nbsp;Manual</b></a>)
(<a href="../filemap_hdf/index.html"><b>SIDS-to-HDF&nbsp;File&nbsp;Mapping&nbsp;Manual</b></a>)
(<a href="index.html"><span class=nav><b>Mid-Level&nbsp;Library</b></span></a>)
(<a href="../adf/index.html"><b>ADF&nbsp;User's&nbsp;Guide</b></a>)
(<a href="../cgnstools/index.html"><b>CGNS&nbsp;Tools&nbsp;and&nbsp;Utilities</b></a>)
<br><br>
(<a href="general.html"><b>General&nbsp;Remarks</b></a>)
(<span class=nav><b>Opening&nbsp;and&nbsp;Closing&nbsp;a&nbsp;CGNS&nbsp;File</b></span>)
(<a href="navigating.html"><b>Navigating&nbsp;a&nbsp;CGNS&nbsp;File</b></a>)
(<a href="error.html"><b>Error&nbsp;Handling</b></a>)
(<a href="structural.html"><b>Structural&nbsp;Nodes</b></a>)
(<a href="descriptor.html"><b>Descriptors</b></a>)
(<a href="physical.html"><b>Physical&nbsp;Data</b></a>)
(<a href="location.html"><b>Location&nbsp;and&nbsp;Position</b></a>)
(<a href="auxiliary.html"><b>Auxiliary&nbsp;Data</b></a>)
(<a href="grid.html"><b>Grid&nbsp;Specification</b></a>)
(<a href="solution.html"><b>Solution&nbsp;Data</b></a>)
(<a href="connectivity.html"><b>Grid&nbsp;Connectivity</b></a>)
(<a href="bc.html"><b>Boundary&nbsp;Conditions</b></a>)
(<a href="equation.html"><b>Equation&nbsp;Specification</b></a>)
(<a href="families.html"><b>Families</b></a>)
(<a href="timedep.html"><b>Time-Dependent&nbsp;Data</b></a>)
(<a href="links.html"><b>Links</b></a>)
</center>
</small>
<a name="endnav"></a>

<h2>Opening and Closing a CGNS File</h2>

<table width=100% cellspacing=0 cellpadding=5 border rules=groups
       bgcolor="#ced9ff">
<colgroup width=90%>
<colgroup>
<thead>
<tr><th align=left scope=col width=90%>Functions
    <th scope=col>Modes
<tbody>
<tr><td nowrap>
        <tt><b><span class=out><i>ier</i></span> = cg_open(<span class=in>char *filename</span>, <span class=in>int mode</span>, <span class=out><i>int *fn</i></span>);</b></tt>
    <td align=center valign=baseline>
        <tt><b>r&nbsp;w&nbsp;m</b></tt>
<tr><td nowrap>
        <tt><b><span class=out><i>ier</i></span> = cg_version(<span class=in>int fn</span>, <span class=out><i>float *version</i></span>);</b></tt>
    <td align=center valign=baseline>
        <tt><b>r&nbsp;w&nbsp;m</b></tt>
<tr><td nowrap>
        <tt><b><span class=out><i>ier</i></span> = cg_close(<span class=in>int fn</span>);</b></tt>
    <td align=center valign=baseline>
        <tt><b>r&nbsp;w&nbsp;m</b></tt>
<tbody>
<tr><td nowrap>
        <tt><b>call cg_open_f(<span class=in>filename</span>, <span class=in>mode</span>, <span class=out><i>fn</i></span>, <span class=out><i>ier</i></span>)</b></tt>
    <td align=center valign=baseline>
        <tt><b>r&nbsp;w&nbsp;m</b></tt>
<tr><td nowrap>
        <tt><b>call cg_version_f(<span class=in>fn</span>, <span class=out><i>version</i></span>, <span class=out><i>ier</i></span>)</b></tt>
    <td align=center valign=baseline>
        <tt><b>r&nbsp;w&nbsp;m</b></tt>
<tr><td nowrap>
        <tt><b>call cg_close_f(<span class=in>fn</span>, <span class=out><i>ier</i></span>)</b></tt>
    <td align=center valign=baseline>
        <tt><b>r&nbsp;w&nbsp;m</b></tt>
</table>

<br>
<b><span class=in>Input</span>/<span class=out><i>Output</i></span></b>

<br><br>
<table cellspacing=0 cellpadding=0 noborder>
<tr valign=baseline><td><tt>&nbsp;&nbsp;&nbsp;</tt>
   <td><tt>filename</tt><td><tt>&nbsp;&nbsp;</tt>
   <td>Name of the CGNS file, including path name if necessary.
       There is no limit on the length of this character variable.
<tr valign=baseline><td>
   <td><tt>mode</tt><td>
   <td>Mode used for opening the file.
       The modes currently supported are <tt>MODE_READ</tt>,
       <tt>MODE_WRITE</tt>, and <tt>MODE_MODIFY</tt>.
<tr valign=baseline><td>
   <td><tt>fn</tt><td>
   <td>CGNS file index number.
<tr valign=baseline><td>
   <td><tt>version</tt><td>
   <td>CGNS version number.
<tr valign=baseline><td>
   <td><tt>ier</tt><td>
   <td>Error status.
</table>

<p>
The function <tt>cg_open</tt> must always be the first one called.
It opens a CGNS file for reading and/or writing and returns an index
number <tt>fn</tt>.
The index number serves to identify the CGNS file in subsequent
function calls.
Several CGNS files can be opened simultaneously.
The current limit on the number of files opened at once depends on the
platform.
On an SGI workstation, this limit is set at 100 (parameter
<tt>FOPEN_MAX</tt> in <i>stdio.h</i>).

<p>
The file can be opened in one of the following modes:

<br><br>
<table cellspacing=0 cellpadding=0 noborder>
<tr valign=baseline><td><tt>&nbsp;&nbsp;&nbsp;</tt>
   <td><tt>MODE_READ</tt><td><tt>&nbsp;&nbsp;</tt>
   <td>Read only mode.
<tr valign=baseline><td>
   <td><tt>MODE_WRITE</tt><td>
   <td>Write only mode.
<tr valign=baseline><td>
   <td><tt>MODE_MODIFY</tt><td>
   <td>Reading and/or writing is allowed.
</table>

<p>
When the file is opened, if no <tt>CGNSLibraryVersion_t</tt> node is
found, a default value of 1.05 is assumed for the CGNS version number.
Note that this corresponds to an old version of the CGNS standard, that
doesn't include many data structures supported by the current standard.

<p>
The function <tt>cg_close</tt> must always be the last one called.
It closes the CGNS file designated by the index number <tt>fn</tt> and frees
the memory where the CGNS data was kept.
When a file is opened for writing, <tt>cg_close</tt> writes all the CGNS
data in memory onto disk prior to closing the file.
Consequently, if is omitted, the CGNS file is not written properly.

<p>
In order to reduce memory usage and improve execution speed,
large arrays such as grid coordinates or flow solutions are not actually
stored in memory.
Instead, only their ADF (or HDF) ID numbers are kept in memory for future
reference.
When a CGNS file is open in writing mode, large arrays passed to the
library are immediately written into the CGNS file, directly under the
root node.
When the file is closed, these arrays are moved to their appropriate
location in the CGNS tree.

<p>
<hr size=4 width=75%>
<div class=footer>
<!--#include virtual="../include/footer_small.html" -->
Last updated 1 Sep 2005

</body>
</html>
